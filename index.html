<!DOCTYPE html>
<html>
<head>
	<title>Single layer | CARTO</title>
	<meta name="viewport" content="initial-scale=1.0">
	<meta charset="utf-8">
	<!-- Include Leaflet -->
	<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
	<link href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" rel="stylesheet">
	<!-- Include CARTO.js -->
	<script src="https://libs.cartocdn.com/carto.js/v4.2.0/carto.min.js"></script>
	<link href="https://carto.com/developers/carto-js/examples/maps/public/style.css" rel="stylesheet">

	<link href="https://fonts.googleapis.com/css?family=Montserrat:600" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="carto-popup-style.css">
	<link rel="stylesheet" type="text/css" href="popup.css">

</head>
<body>

<div id="map">
</div>

<script src="popupHTMLTemplate.js"></script>
<script src="Map.js"></script>

<script>

	const cartoClientCredentials = {
		apiKey: 'cNChT-6tYUR1uDCnrvtmkA',
		username: 'ruralinnovation-admin'
	}

	const layers = [
		{
			dataset: 'county_preparedness_score_v0_3',
			options: {
				featureOverColumns: [
					'name',
				  	'st_stusps',
					'prep_score',
					'prep_level',
					'pc_score',
					'hr_score',
					'dem_score',
					'se_score',
					'covid_score',
					'total_staff_dt_100k',
					'total_estimated_bed_40_mins_100k',
					'pct_65_over_2018',
					'svi_socioeconomic',
					'icuover_max_needed_100k',
				]
			},
			style: `#layer {
		  polygon-fill: ramp(
			[prep_score],
			(
			  #dc0302,
			  #DD6F4C,
			  #1FADB6,
			  #76D282,
			  #77ff02
			),
			equal
		  );
		}
		#layer::outline {
		  line-width: 0.4;
		  line-color: #FFFFFF;
		  line-opacity: 0.5;
		}`
		}
	]


	const map = new Map('map', cartoClientCredentials, layers)

	const manhattanLatLon = { lon: -73.96777, lat: 40.68349 }
	const windsorCountyVT = { lon: -72.39810, lat: 43.49662 }

	// setTimeout(() => {
	// 	map.flyToCounty(manhattanLatLon)
	// }, 2000)
	//
	// setTimeout(() => {
	// 	map.flyToCounty(windsorCountyVT)
	// }, 5000)




</script>
</body>
</html>
